# HDU-3533

## Escape

` 地址https://vjudge.net/article/187`

### Descriptions：

```
The students of the HEU are maneuvering for their military training.
The red army and the blue army are at war today. The blue army finds that Little A is the spy of the red army, so Little A has to escape from the headquarters of the blue army to that of the red army. The battle field is a rectangle of size m*n, and the headquarters of the blue army and the red army are placed at (0, 0) and (m, n), respectively, which means that Little A will go from (0, 0) to (m, n). The picture below denotes the shape of the battle field and the notation of directions that we will use later.
```
![hdu src img](https://acm.hdu.edu.cn/data/images/3533-1.jpg)
```
The blue army is eager to revenge, so it tries its best to kill Little A during his escape. The blue army places many castles, which will shoot to a fixed direction periodically. It costs Little A one unit of energy per second, whether he moves or not. If he uses up all his energy or gets shot at sometime, then he fails. Little A can move north, south, east or west, one unit per second. Note he may stay at times in order not to be shot.
To simplify the problem, let’s assume that Little A cannot stop in the middle of a second. He will neither get shot nor block the bullet during his move, which means that a bullet can only kill Little A at positions with integer coordinates. Consider the example below. The bullet moves from (0, 3) to (0, 0) at the speed of 3 units per second, and Little A moves from (0, 0) to (0, 1) at the speed of 1 unit per second. Then Little A is not killed. But if the bullet moves 2 units per second in the above example, Little A will be killed at (0, 1).
Now, please tell Little A whether he can escape.
```


### Input

```
For every test case, the first line has four integers, m, n, k and d (2<=m, n<=100, 0<=k<=100, m+ n<=d<=1000). m and n are the size of the battle ground, k is the number of castles and d is the units of energy Little A initially has. The next k lines describe the castles each. Each line contains a character c and four integers, t, v, x and y. Here c is ‘N’, ‘S’, ‘E’ or ‘W’ giving the direction to which the castle shoots, t is the period, v is the velocity of the bullets shot (i.e. units passed per second), and (x, y) is the location of the castle. Here we suppose that if a castle is shot by other castles, it will block others’ shots but will NOT be destroyed. And two bullets will pass each other without affecting their directions and velocities.
All castles begin to shoot when Little A starts to escape.
Proceed to the end of file.
```

### OutPut

```
If Little A can escape, print the minimum time required in seconds on a single line. Otherwise print “Bad luck!” without quotes.
```


### Sample Input

```
4 4 3 10
N 1 1 1 1
W 1 1 3 2
W 2 1 2 4
4 4 3 10
N 1 1 1 1
W 1 1 3 2
W 1 1 2 4
```

### Sample Output

```
9
Bad luck!
```

### 思路

```
fucking translate
蓝军一心复仇，竭尽全力在小 A 逃跑时将其击杀。蓝军部署了许多城堡，这些城堡会周期性地朝固定方向射击。无论小 A 是否移动，每秒都会消耗一点能量。如果能量耗尽或被击中，则行动失败。小 A 可以向北、南、东或西移动，速度为每秒一格。注意，他有时可能会停留在原地以避免被击中。
为了简化问题，我们假设小 A 在一秒内无法停下来。在他移动的过程中，他既不会被子弹击中，也不会阻挡子弹，这意味着子弹只能在坐标为整数的位置击中小 A。考虑以下示例。子弹以每秒 3 个单位的速度从(0, 3)移动到(0, 0)，而小 A 以每秒 1 个单位的速度从(0, 0)移动到(0, 1)。那么小 A 不会被击中。但是，如果子弹在上述示例中以每秒 2 个单位的速度移动，那么小 A 将在(0, 1)处被击中。
现在请告诉小 A 他能不能逃脱。
```

```
对于每个测试用例，第一行包含四个整数 m、n、k 和 d（2<=m，n<=100，0<=k<=100，m+n<=d<=1000）。m 和 n 代表战场的大小，k 代表城堡的数量，d 代表小 A 初始拥有的能量单位。接下来的 k 行分别描述每个城堡。每行包含一个字符 c 和四个整数 t、v、x 和 y。其中 c 为 'N'、'S'、'E' 或 'W'，表示城堡射击的方向；t 为周期；v 为子弹的射速（单位为每秒）；(x, y) 为城堡的位置。这里我们假设，如果一个城堡被其他城堡射击，它会阻挡其他城堡的射击，但不会被摧毁。两颗子弹可以相互穿过，而不会影响它们的方向和速度。
当小 A 开始逃跑时，所有城堡都开始射击。
继续执行到文件末尾。
如果小 A 能够逃脱，则在一行中打印所需最短时间（以秒为单位）。否则，打印“运气不好！”（不带引号）。
```



### Code

见 chapter2  HDU3533函数